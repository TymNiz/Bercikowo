<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Rozkład jazdy</title>
  <style>
    body {
      font-family: sans-serif;
      background: #fdfdfd;
      color: #222;
      padding: 20px;
    }
    input, button {
      padding: 6px;
      margin: 5px 0;
      font-size: 14px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      table-layout: fixed;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      vertical-align: top;
      word-wrap: break-word;
    }
    th {
      background-color: #eee;
    }
    td:nth-child(1),
    th:nth-child(1),
    td:nth-child(2),
    th:nth-child(2),
    td:nth-child(5),
    th:nth-child(5) {
      width: 25%;
    }
    td:nth-child(3),
    th:nth-child(3),
    td:nth-child(4),
    th:nth-child(4) {
      width: 14.3%;
    }
    td:nth-child(1), td:nth-child(3), td:nth-child(4) {
      text-align: center;
    }
    td:nth-child(2) {
      text-align: left;
    }
    td:nth-child(5) {
      text-align: right;
    }
    datalist option {
      font-size: 14px;
    }
  </style>
</head>
<body>

  <h2>Rozkład jazdy dla stacji</h2>

  <label>Stacja:
    <input type="text" id="stationInput" list="stations">
  </label><br>
  <label>Data:
    <input type="date" id="dateInput">
  </label><br>
  <button onclick="showTimetable()">Pokaż rozkład</button>

  <datalist id="stations"></datalist>

  <table id="timetable" style="display:none;">
    <thead>
      <tr>
        <th>POCIĄG</th>
        <th>Z</th>
        <th>PRZ</th>
        <th>ODJ</th>
        <th>DO</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <a>Powrót</a> <a href="rj26.html">KLIK</a>

  <script>
    const trains = [
      {
        number: "44601",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "05:07" },
          { station: "Piotrków Rafineria", arr: "05:10", dep: "05:10" },
          { station: "Stachy", arr: "05:19", dep: "05:20" },
		  { station: "Kosewo", arr: "05:27", dep: "05:29" },
		  { station: "Międzyrzecze", arr: "05:33", dep: "05:33" },
		  { station: "Rudyszwałd", arr: "05:38", dep: "05:38" },
          { station: "Chałupki", arr: "05:45", dep: null }
        ]
      },
	  {
        number: "44600",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Chałupki", arr: null, dep: "06:10" },
          { station: "Rudyszwałd", arr: "06:17", dep: "06:17" },
          { station: "Międzyrzecze", arr: "06:22", dep: "06:22" },
		  { station: "Kosewo", arr: "06:26", dep: "06:28" },
		  { station: "Stachy", arr: "06:35", dep: "06:36" },
		  { station: "Piotrków Rafineria", arr: "06:45", dep: "06:45" },
          { station: "Piotrków", arr: "06:48", dep: null }
        ]
      },
	  {
        number: "44603",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "07:02" },
          { station: "Piotrków Rafineria", arr: "07:05", dep: "07:05" },
          { station: "Stachy", arr: "07:14", dep: "07:15" },
		  { station: "Kosewo", arr: "07:22", dep: "07:24" },
		  { station: "Międzyrzecze", arr: "07:28", dep: "07:28" },
		  { station: "Rudyszwałd", arr: "07:35", dep: "07:35" },
          { station: "Chałupki", arr: "07:40", dep: null }
        ]
      },
	  {
        number: "44602",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Chałupki", arr: null, dep: "07:55" },
          { station: "Rudyszwałd", arr: "08:02", dep: "08:02" },
          { station: "Międzyrzecze", arr: "08:07", dep: "08:07" },
		  { station: "Kosewo", arr: "08:11", dep: "08:13" },
		  { station: "Stachy", arr: "08:20", dep: "08:21" },
		  { station: "Piotrków Rafineria", arr: "08:30", dep: "08:30" },
          { station: "Piotrków", arr: "08:33", dep: null }
        ]
      },
	  {
        number: "44605",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "09:32" },
          { station: "Piotrków Rafineria", arr: "09:35", dep: "09:35" },
          { station: "Stachy", arr: "09:44", dep: "09:45" },
		  { station: "Kosewo", arr: "09:52", dep: "09:54" },
		  { station: "Międzyrzecze", arr: "09:58", dep: "09:58" },
		  { station: "Rudyszwałd", arr: "10:05", dep: "10:05" },
          { station: "Chałupki", arr: "10:10", dep: null }
        ]
      },
	  {
        number: "44604",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Chałupki", arr: null, dep: "10:25" },
          { station: "Rudyszwałd", arr: "10:32", dep: "10:32" },
          { station: "Międzyrzecze", arr: "10:37", dep: "10:37" },
		  { station: "Kosewo", arr: "10:41", dep: "10:43" },
		  { station: "Stachy", arr: "10:50", dep: "10:51" },
		  { station: "Piotrków Rafineria", arr: "11:00", dep: "11:00" },
          { station: "Piotrków", arr: "11:03", dep: null }
        ]
      },
	  {
        number: "44607",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "13:12" },
          { station: "Piotrków Rafineria", arr: "13:15", dep: "13:15" },
          { station: "Stachy", arr: "13:24", dep: "13:25" },
		  { station: "Kosewo", arr: "13:32", dep: "13:34" },
		  { station: "Międzyrzecze", arr: "13:38", dep: "13:38" },
		  { station: "Rudyszwałd", arr: "13:45", dep: "13:45" },
          { station: "Chałupki", arr: "13:50", dep: null }
        ]
      },
	  {
        number: "44606",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Chałupki", arr: null, dep: "14:15" },
          { station: "Rudyszwałd", arr: "14:22", dep: "14:22" },
          { station: "Międzyrzecze", arr: "14:27", dep: "14:27" },
		  { station: "Kosewo", arr: "14:31", dep: "14:33" },
		  { station: "Stachy", arr: "14:40", dep: "14:41" },
		  { station: "Piotrków Rafineria", arr: "14:50", dep: "14:50" },
          { station: "Piotrków", arr: "14:53", dep: null }
        ]
      },
	  {
        number: "44609",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "15:10" },
          { station: "Piotrków Rafineria", arr: "15:13", dep: "15:13" },
          { station: "Stachy", arr: "15:22", dep: "15:23" },
		  { station: "Kosewo", arr: "15:30", dep: "15:32" },
		  { station: "Międzyrzecze", arr: "15:36", dep: "15:36" },
		  { station: "Rudyszwałd", arr: "15:43", dep: "15:43" },
          { station: "Chałupki", arr: "15:48", dep: null }
        ]
      },
	  {
        number: "44608",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Chałupki", arr: null, dep: "16:05" },
          { station: "Rudyszwałd", arr: "16:12", dep: "16:12" },
          { station: "Międzyrzecze", arr: "16:17", dep: "16:17" },
		  { station: "Kosewo", arr: "16:21", dep: "16:23" },
		  { station: "Stachy", arr: "16:30", dep: "16:31" },
		  { station: "Piotrków Rafineria", arr: "16:40", dep: "16:40" },
          { station: "Piotrków", arr: "16:43", dep: null }
        ]
      },
	  {
        number: "44611",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "17:07" },
          { station: "Piotrków Rafineria", arr: "17:10", dep: "17:10" },
          { station: "Stachy", arr: "17:19", dep: "17:20" },
		  { station: "Kosewo", arr: "17:27", dep: "17:29" },
		  { station: "Międzyrzecze", arr: "17:33", dep: "17:33" },
		  { station: "Rudyszwałd", arr: "17:38", dep: "17:38" },
          { station: "Chałupki", arr: "17:45", dep: null }
        ]
      },
	  {
        number: "44610",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Chałupki", arr: null, dep: "18:10" },
          { station: "Rudyszwałd", arr: "18:17", dep: "18:17" },
          { station: "Międzyrzecze", arr: "18:22", dep: "18:22" },
		  { station: "Kosewo", arr: "18:26", dep: "18:28" },
		  { station: "Stachy", arr: "18:35", dep: "18:36" },
		  { station: "Piotrków Rafineria", arr: "18:45", dep: "18:45" },
          { station: "Piotrków", arr: "18:48", dep: null }
        ]
      },
	  {
        number: "44613",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "19:22" },
          { station: "Piotrków Rafineria", arr: "19:25", dep: "19:25" },
          { station: "Stachy", arr: "19:34", dep: "19:35" },
		  { station: "Kosewo", arr: "19:42", dep: "19:44" },
		  { station: "Międzyrzecze", arr: "19:48", dep: "19:48" },
		  { station: "Rudyszwałd", arr: "19:55", dep: "19:55" },
          { station: "Chałupki", arr: "20:00", dep: null }
        ]
      },
	  {
        number: "44612",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Chałupki", arr: null, dep: "20:15" },
          { station: "Rudyszwałd", arr: "20:22", dep: "20:22" },
          { station: "Międzyrzecze", arr: "20:27", dep: "20:27" },
		  { station: "Kosewo", arr: "20:31", dep: "20:33" },
		  { station: "Stachy", arr: "20:40", dep: "20:41" },
		  { station: "Piotrków Rafineria", arr: "20:50", dep: "20:50" },
          { station: "Piotrków", arr: "20:53", dep: null }
        ]
      },
	  {
        number: "44615",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "21:12" },
          { station: "Piotrków Rafineria", arr: "21:15", dep: "21:15" },
          { station: "Stachy", arr: "21:24", dep: "21:25" },
		  { station: "Kosewo", arr: "21:32", dep: "21:34" },
		  { station: "Międzyrzecze", arr: "21:38", dep: "21:38" },
		  { station: "Rudyszwałd", arr: "21:45", dep: "21:45" },
          { station: "Chałupki", arr: "21:50", dep: null }
        ]
      },
	  {
        number: "44614",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Chałupki", arr: null, dep: "22:15" },
          { station: "Rudyszwałd", arr: "22:22", dep: "22:22" },
          { station: "Międzyrzecze", arr: "22:27", dep: "22:27" },
		  { station: "Kosewo", arr: "22:31", dep: "22:33" },
		  { station: "Stachy", arr: "22:40", dep: "22:41" },
		  { station: "Piotrków Rafineria", arr: "22:50", dep: "22:50" },
          { station: "Piotrków", arr: "22:53", dep: null }
        ]
      },
	  {
        number: "44400",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Wilcza", arr: null, dep: "04:22" },
          { station: "Wilcza XYZ", arr: "04:25", dep: "04:25" },
          { station: "Morawiany Zarzecze", arr: "04:42", dep: "04:42" },
		  { station: "Morawiany", arr: "04:44", dep: "04:45" },
		  { station: "Pniów", arr: "04:59", dep: "05:00" },
		  { station: "Oksice", arr: "05:17", dep: "05:18" },
		  { station: "Oksice Tartak", arr: "05:20", dep: "05:20" },
		  { station: "Grzęzno", arr: "05:35", dep: "05:36" },
		  { station: "Wielecin Miasto", arr: "05:48", dep: "05:50" },
          { station: "Wielecin", arr: "05:53", dep: null }
        ]
      },
	  {
        number: "44401",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Wielecin", arr: null, dep: "06:10" },
          { station: "Wielecin Miasto", arr: "06:13", dep: "06:15" },
          { station: "Grzęzno", arr: "06:27", dep: "06:28" },
		  { station: "Oksice Tartak", arr: "06:43", dep: "06:43" },
		  { station: "Oksice", arr: "06:45", dep: "06:46" },
		  { station: "Pniów", arr: "07:03", dep: "07:04" },
		  { station: "Morawiany", arr: "07:18", dep: "07:19" },
		  { station: "Morawiany Zarzecze", arr: "07:21", dep: "07:21" },
		  { station: "Wilcza XYZ", arr: "07:38", dep: "07:38" },
          { station: "Wilcza", arr: "07:41", dep: null }
        ]
      },
	  {
        number: "44402",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Wilcza", arr: null, dep: "06:22" },
          { station: "Wilcza XYZ", arr: "06:25", dep: "06:25" },
          { station: "Morawiany Zarzecze", arr: "06:42", dep: "06:42" },
		  { station: "Morawiany", arr: "06:44", dep: "06:45" },
		  { station: "Pniów", arr: "06:59", dep: "07:04" },
		  { station: "Oksice", arr: "07:21", dep: "07:22" },
		  { station: "Oksice Tartak", arr: "07:24", dep: "07:24" },
		  { station: "Grzęzno", arr: "07:39", dep: "07:40" },
		  { station: "Wielecin Miasto", arr: "07:52", dep: "07:54" },
          { station: "Wielecin", arr: "07:57", dep: null }
        ]
      },
	  {
        number: "44403",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Wielecin", arr: null, dep: "07:21" },
          { station: "Wielecin Miasto", arr: "07:24", dep: "07:26" },
          { station: "Grzęzno", arr: "07:38", dep: "07:40" },
		  { station: "Oksice Tartak", arr: "07:55", dep: "07:55" },
		  { station: "Oksice", arr: "07:57", dep: "07:59" },
		  { station: "Pniów", arr: "08:16", dep: "08:17" },
		  { station: "Morawiany", arr: "08:31", dep: "08:33" },
		  { station: "Morawiany Zarzecze", arr: "08:35", dep: "08:35" },
		  { station: "Wilcza XYZ", arr: "09:00", dep: "09:00" },
          { station: "Wilcza", arr: "09:03", dep: null }
        ]
      },
	  {
        number: "44404",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Wilcza", arr: null, dep: "04:22" },
          { station: "Wilcza XYZ", arr: "04:25", dep: "04:25" },
          { station: "Morawiany Zarzecze", arr: "04:42", dep: "04:42" },
		  { station: "Morawiany", arr: "04:44", dep: "04:45" },
		  { station: "Pniów", arr: "04:59", dep: "05:00" },
		  { station: "Oksice", arr: "05:17", dep: "05:18" },
		  { station: "Oksice Tartak", arr: "05:20", dep: "05:20" },
		  { station: "Grzęzno", arr: "05:35", dep: "05:36" },
		  { station: "Wielecin Miasto", arr: "05:48", dep: "05:50" },
          { station: "Wielecin", arr: "05:53", dep: null }
        ]
      },
	  {
        number: "44406",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Wilcza", arr: null, dep: "08:09" },
          { station: "Wilcza XYZ", arr: "08:12", dep: "08:12" },
          { station: "Morawiany Zarzecze", arr: "08:29", dep: "08:29" },
		  { station: "Morawiany", arr: "08:32", dep: "08:33" },
		  { station: "Pniów", arr: "08:47", dep: "08:48" },
		  { station: "Oksice", arr: "09:05", dep: "09:06" },
		  { station: "Oksice Tartak", arr: "09:08", dep: "09:08" },
		  { station: "Grzęzno", arr: "09:23", dep: "09:24" },
		  { station: "Wielecin Miasto", arr: "09:36", dep: "09:38" },
          { station: "Wielecin", arr: "09:41", dep: null }
        ]
      },
	  {
        number: "44300",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "05:35" },
          { station: "Wilcza Towarowa", arr: "05:47", dep: "05:48" },
          { station: "Wilcza Miasto", arr: "05:51", dep: "05:52" },
          { station: "Bercikowo Ligota", arr: "05:58", dep: null }
        ]
      },
	  
	  {
        number: "44301",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "06:10" },
          { station: "Wilcza Miasto", arr: "06:16", dep: "06:17" },
          { station: "Wilcza Towarowa", arr: "06:20", dep: "06:21" },
          { station: "Piotrków", arr: "06:33", dep: null }
        ]
      },
	  {
        number: "44302",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "07:35" },
          { station: "Wilcza Towarowa", arr: "07:47", dep: "07:48" },
          { station: "Wilcza Miasto", arr: "07:51", dep: "07:52" },
          { station: "Bercikowo Ligota", arr: "07:58", dep: null }
        ]
      },
	  {
        number: "44303",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "08:10" },
          { station: "Wilcza Miasto", arr: "08:16", dep: "08:17" },
          { station: "Wilcza Towarowa", arr: "08:20", dep: "08:21" },
          { station: "Piotrków", arr: "08:33", dep: null }
        ]
      },
	  {
        number: "44304",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "09:35" },
          { station: "Wilcza Towarowa", arr: "09:47", dep: "09:48" },
          { station: "Wilcza Miasto", arr: "09:51", dep: "09:52" },
          { station: "Bercikowo Ligota", arr: "09:58", dep: null }
        ]
      },
	  {
        number: "44305",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "10:10" },
          { station: "Wilcza Miasto", arr: "10:16", dep: "10:17" },
          { station: "Wilcza Towarowa", arr: "10:20", dep: "10:21" },
          { station: "Piotrków", arr: "10:33", dep: null }
        ]
      },
	  {
        number: "44306",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "11:35" },
          { station: "Wilcza Towarowa", arr: "11:47", dep: "11:48" },
          { station: "Wilcza Miasto", arr: "11:51", dep: "11:52" },
          { station: "Bercikowo Ligota", arr: "11:58", dep: null }
        ]
      },
	  {
        number: "44307",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "12:10" },
          { station: "Wilcza Miasto", arr: "12:16", dep: "12:17" },
          { station: "Wilcza Towarowa", arr: "12:20", dep: "12:21" },
          { station: "Piotrków", arr: "12:33", dep: null }
        ]
      },
	  {
        number: "44308",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "13:35" },
          { station: "Wilcza Towarowa", arr: "13:47", dep: "13:48" },
          { station: "Wilcza Miasto", arr: "13:51", dep: "13:52" },
          { station: "Bercikowo Ligota", arr: "13:58", dep: null }
        ]
      },
	  {
        number: "44309",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "14:10" },
          { station: "Wilcza Miasto", arr: "14:16", dep: "14:17" },
          { station: "Wilcza Towarowa", arr: "14:20", dep: "14:21" },
          { station: "Piotrków", arr: "14:33", dep: null }
        ]
      },
	  {
        number: "44310",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "15:35" },
          { station: "Wilcza Towarowa", arr: "15:47", dep: "15:48" },
          { station: "Wilcza Miasto", arr: "15:51", dep: "15:52" },
          { station: "Bercikowo Ligota", arr: "15:58", dep: null }
        ]
      },
	  {
        number: "44311",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "16:10" },
          { station: "Wilcza Miasto", arr: "16:16", dep: "16:17" },
          { station: "Wilcza Towarowa", arr: "16:20", dep: "16:21" },
          { station: "Piotrków", arr: "16:33", dep: null }
        ]
      },
	  {
        number: "44312",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "17:35" },
          { station: "Wilcza Towarowa", arr: "17:47", dep: "17:48" },
          { station: "Wilcza Miasto", arr: "17:51", dep: "17:52" },
          { station: "Bercikowo Ligota", arr: "17:58", dep: null }
        ]
      },
	  {
        number: "44313",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "18:10" },
          { station: "Wilcza Miasto", arr: "18:16", dep: "18:17" },
          { station: "Wilcza Towarowa", arr: "18:20", dep: "18:21" },
          { station: "Piotrków", arr: "18:33", dep: null }
        ]
      },
	  {
        number: "44314",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "19:35" },
          { station: "Wilcza Towarowa", arr: "19:47", dep: "19:48" },
          { station: "Wilcza Miasto", arr: "19:51", dep: "19:52" },
          { station: "Bercikowo Ligota", arr: "19:58", dep: null }
        ]
      },
	  {
        number: "44315",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "20:10" },
          { station: "Wilcza Miasto", arr: "20:16", dep: "20:17" },
          { station: "Wilcza Towarowa", arr: "20:20", dep: "20:21" },
          { station: "Piotrków", arr: "20:33", dep: null }
        ]
      },
	  {
        number: "44316",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Piotrków", arr: null, dep: "21:35" },
          { station: "Wilcza Towarowa", arr: "21:47", dep: "21:48" },
          { station: "Wilcza Miasto", arr: "21:51", dep: "21:52" },
          { station: "Bercikowo Ligota", arr: "21:58", dep: null }
        ]
      },
	  {
        number: "44317",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-7",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "22:10" },
          { station: "Wilcza Miasto", arr: "22:16", dep: "22:17" },
          { station: "Wilcza Towarowa", arr: "22:20", dep: "22:21" },
          { station: "Piotrków", arr: "22:33", dep: null }
        ]
      },
	  {
        number: "44318",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Piotrków", arr: null, dep: "08:35" },
          { station: "Wilcza Towarowa", arr: "08:47", dep: "08:48" },
          { station: "Wilcza Miasto", arr: "08:51", dep: "08:52" },
          { station: "Bercikowo Ligota", arr: "08:58", dep: null }
        ]
      },
	  {
        number: "44319",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "09:10" },
          { station: "Wilcza Miasto", arr: "09:16", dep: "09:17" },
          { station: "Wilcza Towarowa", arr: "09:20", dep: "09:21" },
          { station: "Piotrków", arr: "09:33", dep: null }
        ]
      },
	  {
        number: "44320",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Piotrków", arr: null, dep: "10:35" },
          { station: "Wilcza Towarowa", arr: "10:47", dep: "10:48" },
          { station: "Wilcza Miasto", arr: "10:51", dep: "10:52" },
          { station: "Bercikowo Ligota", arr: "10:58", dep: null }
        ]
      },
	  {
        number: "44321",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "11:10" },
          { station: "Wilcza Miasto", arr: "11:16", dep: "11:17" },
          { station: "Wilcza Towarowa", arr: "11:20", dep: "11:21" },
          { station: "Piotrków", arr: "11:33", dep: null }
        ]
      },
	  {
        number: "44322",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Piotrków", arr: null, dep: "14:35" },
          { station: "Wilcza Towarowa", arr: "14:47", dep: "14:48" },
          { station: "Wilcza Miasto", arr: "14:51", dep: "14:52" },
          { station: "Bercikowo Ligota", arr: "14:58", dep: null }
        ]
      },
	  {
        number: "44323",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "15:10" },
          { station: "Wilcza Miasto", arr: "15:16", dep: "15:17" },
          { station: "Wilcza Towarowa", arr: "15:20", dep: "15:21" },
          { station: "Piotrków", arr: "15:33", dep: null }
        ]
      },
	  {
        number: "44324",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Piotrków", arr: null, dep: "16:35" },
          { station: "Wilcza Towarowa", arr: "16:47", dep: "16:48" },
          { station: "Wilcza Miasto", arr: "16:51", dep: "16:52" },
          { station: "Bercikowo Ligota", arr: "16:58", dep: null }
        ]
      },
	  {
        number: "44325",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "17:10" },
          { station: "Wilcza Miasto", arr: "17:16", dep: "17:17" },
          { station: "Wilcza Towarowa", arr: "17:20", dep: "17:21" },
          { station: "Piotrków", arr: "17:33", dep: null }
        ]
      },
	  {
        number: "44326",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Piotrków", arr: null, dep: "18:35" },
          { station: "Wilcza Towarowa", arr: "18:47", dep: "18:48" },
          { station: "Wilcza Miasto", arr: "18:51", dep: "18:52" },
          { station: "Bercikowo Ligota", arr: "18:58", dep: null }
        ]
      },
	  {
        number: "44327",
        name: "",
        carrier: "PR - ",
        category: "R",
        days: "1-5",
        stops: [
          { station: "Bercikowo Ligota", arr: null, dep: "19:10" },
          { station: "Wilcza Miasto", arr: "19:16", dep: "19:17" },
          { station: "Wilcza Towarowa", arr: "19:20", dep: "19:21" },
          { station: "Piotrków", arr: "19:33", dep: null }
        ]
      }
    ];

    const stationInput = document.getElementById("stationInput");
    const dateInput = document.getElementById("dateInput");
    const table = document.getElementById("timetable");
    const tbody = table.querySelector("tbody");

    const allStations = Array.from(new Set(trains.flatMap(t => t.stops.map(s => s.station)))).sort();
    const stationList = document.getElementById("stations");
    allStations.forEach(s => {
      const opt = document.createElement("option");
      opt.value = s;
      stationList.appendChild(opt);
    });

    const today = new Date();
    dateInput.value = today.toISOString().split("T")[0];

    function dayMatches(trainDays, travelDate) {
      const dayOfWeek = travelDate.getDay();
      const dayMap = { 0: 7, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6 };
      const day = dayMap[dayOfWeek];
      if (trainDays.includes(",")) {
        return trainDays.split(",").includes(day.toString());
      }
      const [from, to] = trainDays.split("-").map(Number);
      return day >= from && day <= to;
    }

    function showTimetable() {
      const station = stationInput.value.trim();
      const date = new Date(dateInput.value);
      tbody.innerHTML = "";
      table.style.display = "none";

      if (!station || !dateInput.value) {
        alert("Wprowadź stację i datę.");
        return;
      }

      const matching = [];

      for (const train of trains) {
        if (!dayMatches(train.days, date)) continue;
        const stops = train.stops;
        const index = stops.findIndex(s => s.station === station);
        if (index === -1) continue;

        const stop = stops[index];
        const from = index > 0 ? stops[0] : null;
        const to = index < stops.length - 1 ? stops[stops.length - 1] : null;

        const fromText = from
          ? `<strong>${from.station}</strong> ${from.dep ?? ""}<br>` +
            stops.slice(1, index).map(s => `${s.station} ${s.dep ?? ""}`).join(", ")
          : "";

        const toText = to
          ? stops.slice(index + 1, stops.length - 1).map(s => `${s.station} ${s.arr ?? ""}`).join(", ") +
            "<br><strong>" + to.station + "</strong> " + (to.arr ?? "")
          : "";

        matching.push({
          train,
          stop,
          fromText,
          toText
        });
      }

      if (matching.length === 0) {
        alert("Brak pociągów na tej stacji tego dnia.");
        return;
      }

      // ✔️ SORTOWANIE CHRONOLOGICZNE
      matching.sort((a, b) => {
        const t1 = a.stop.arr || a.stop.dep;
        const t2 = b.stop.arr || b.stop.dep;
        return t1.localeCompare(t2);
      });

      for (const entry of matching) {
        const t = entry.train;
        const s = entry.stop;

        const trainHTML = `<strong>${t.carrier} ${t.category}</strong> ${t.number}${t.name ? " <strong>" + t.name.toUpperCase() + "</strong>" : ""}`;

        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${trainHTML}</td>
          <td>${entry.fromText}</td>
          <td>${s.arr ?? ""}</td>
          <td>${s.dep ?? ""}</td>
          <td>${entry.toText}</td>
        `;
        tbody.appendChild(row);
      }

      table.style.display = "table";
    }
  </script>

</body>
</html>
